# Data Model: Frontend Types for Todo Application

**Feature**: Frontend UI for Todo Application
**Date**: 2026-01-07
**Status**: Complete

## Overview

This document defines all TypeScript interfaces and types used in the frontend application. These types match the backend API response formats and provide type safety across the application.

---

## Core Entities

### User (Frontend Session)

Represents an authenticated user's session data stored on the frontend.

```typescript
interface User {
  id: string              // UUID from backend JWT payload
  email: string           // User's email address
}
```

**Storage**: User data extracted from JWT token after authentication. Token itself stored in localStorage as string.

**Usage**: Displayed in navbar, used for session validation.

---

### Task (Backend Data Model)

Represents a todo task item returned by the backend API.

```typescript
interface Task {
  id: string              // UUID generated by backend
  title: string           // Task title (required, max 255 chars)
  description: string | null  // Optional task description
  completed: boolean      // Completion status (default: false)
  user_id: string         // Owner user ID (not displayed in UI, for backend isolation)
  created_at: string      // ISO 8601 timestamp
  updated_at: string      // ISO 8601 timestamp
}
```

**Validation Rules** (enforced backend-side, validated client-side):
- `title`: Required, non-empty, max 255 characters
- `description`: Optional, max 1000 characters
- `completed`: Boolean, defaults to false on creation

**Frontend Display**:
- Show `title` prominently
- Show truncated `description` with full text on hover/expand
- Visual indicator for `completed` status (strikethrough, color change)
- Show formatted `created_at` or `updated_at` timestamps
- Never display `user_id` (internal backend field)

---

## API Response Types

### Authentication Responses

**SignupResponse / LoginResponse**

```typescript
interface AuthResponse {
  token: string           // JWT token for authenticated requests
  user: {
    id: string
    email: string
  }
}
```

**Usage**: Store `token` in localStorage, store `user` data in app state for display.

---

### Task API Responses

**TaskListResponse**

```typescript
interface TaskListResponse {
  tasks: Task[]           // Array of task objects
}
```

**Usage**: GET /api/tasks returns list of all user's tasks.

---

**TaskResponse**

```typescript
interface TaskResponse {
  task: Task              // Single task object
}
```

**Usage**: POST /api/tasks, PUT /api/tasks/:id return single created/updated task.

---

**ErrorResponse**

```typescript
interface ErrorResponse {
  error: string           // Human-readable error message
}
```

**Usage**: All error responses (400, 401, 403, 404, 500) return this format.

---

## Form Data Types

### LoginFormData

```typescript
interface LoginFormData {
  email: string           // Required email address
  password: string        // Required password
}
```

**Validation**:
- `email`: Required, valid email format
- `password`: Required, min 8 characters

---

### SignupFormData

```typescript
interface SignupFormData {
  email: string           // Required email address
  password: string        // Required password (min 8 chars)
}
```

**Validation**:
- `email`: Required, valid email format, not already registered
- `password`: Required, min 8 characters

---

### TaskFormData

```typescript
interface TaskFormData {
  title: string           // Required task title
  description?: string    // Optional task description
}
```

**Validation**:
- `title`: Required, non-empty, max 255 characters
- `description`: Optional, max 1000 characters

**Usage**: Used for both create and edit operations.

---

## UI State Types

### LoadingState

```typescript
type LoadingState = 'idle' | 'loading' | 'success' | 'error'
```

**Usage**: Track async operation state in components.

---

### FormErrors

```typescript
interface FormErrors {
  [key: string]: string | undefined
}
```

**Usage**: Store validation errors for form fields. Key is field name, value is error message.

Example:
```typescript
const errors: FormErrors = {
  title: 'Title is required',
  email: 'Invalid email format'
}
```

---

### APIError

```typescript
interface APIError {
  message: string         // User-friendly error message
  status?: number         // HTTP status code (if available)
}
```

**Usage**: Standardized error object for API client error handling.

---

## Type Exports

All types should be exported from their respective files:

**`types/user.ts`**
- `User`
- `AuthResponse`
- `LoginFormData`
- `SignupFormData`

**`types/task.ts`**
- `Task`
- `TaskListResponse`
- `TaskResponse`
- `TaskFormData`

**`types/api.ts`**
- `ErrorResponse`
- `LoadingState`
- `FormErrors`
- `APIError`

---

## Type Usage Examples

### Creating a new task:

```typescript
import { TaskFormData, Task } from '@/types/task'

const formData: TaskFormData = {
  title: 'Buy groceries',
  description: 'Milk, eggs, bread'
}

// API returns TaskResponse
const response: TaskResponse = await createTask(formData)
const newTask: Task = response.task
```

### Handling authentication:

```typescript
import { LoginFormData, AuthResponse, User } from '@/types/user'

const credentials: LoginFormData = {
  email: 'user@example.com',
  password: 'password123'
}

// API returns AuthResponse
const response: AuthResponse = await login(credentials)
const token: string = response.token
const user: User = response.user
```

### Managing loading state:

```typescript
import { LoadingState } from '@/types/api'

const [loadingState, setLoadingState] = useState<LoadingState>('idle')

setLoadingState('loading')
try {
  await fetchTasks()
  setLoadingState('success')
} catch (error) {
  setLoadingState('error')
}
```

---

## Notes

- All types are TypeScript interfaces (not classes) for simplicity and JSON compatibility
- Types match backend API contracts documented in `contracts/api-endpoints.md`
- Validation rules documented here are enforced client-side for UX, but backend is source of truth
- Optional fields use `?` syntax or `| null` depending on API contract
- ISO 8601 timestamps returned as strings, parsed to Date objects for display formatting only
